# ğŸ”’ æƒé™æ§åˆ¶ä¸å®Œå–„å­˜åœ¨å®‰å…¨é£é™©

## ğŸ“ é—®é¢˜æè¿°
ç³»ç»Ÿç¼ºä¹ç»†ç²’åº¦çš„æƒé™æ§åˆ¶æœºåˆ¶ï¼Œä»…åŸºäºè§’è‰²çš„ç®€å•æƒé™éªŒè¯ï¼Œå­˜åœ¨è¶Šæƒè®¿é—®çš„å®‰å…¨é£é™©ã€‚

## ğŸ” å¤ç°æ­¥éª¤
1. ä½¿ç”¨å­¦ç”Ÿè´¦å·ç™»å½•
2. ç›´æ¥åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ç®¡ç†å‘˜è·¯å¾„ï¼ˆå¦‚ /admin/dashboardï¼‰
3. é¡µé¢ä¼šæ˜¾ç¤º404é”™è¯¯ï¼Œä½†APIæ¥å£æ²¡æœ‰è¢«æ­£ç¡®ä¿æŠ¤
4. ä½¿ç”¨Postmanç­‰å·¥å…·ï¼Œç”¨å­¦ç”ŸTokenè°ƒç”¨ç®¡ç†å‘˜API
5. å¯ä»¥æˆåŠŸè·å–æˆ–ä¿®æ”¹ä¸åº”æœ‰æƒé™çš„æ•°æ®

## ğŸ¯ é¢„æœŸè¡Œä¸º
- æ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®å…¶è§’è‰²æƒé™å†…çš„é¡µé¢å’ŒåŠŸèƒ½
- APIæ¥å£åº”æœ‰ä¸¥æ ¼çš„æƒé™éªŒè¯
- æ•æ„Ÿæ“ä½œéœ€è¦é¢å¤–çš„æƒé™æ£€æŸ¥
- å‰ç«¯è·¯ç”±åº”æœ‰æƒé™å®ˆå«ä¿æŠ¤

## âŒ å®é™…è¡Œä¸º
- å‰ç«¯è·¯ç”±æ²¡æœ‰æƒé™å®ˆå«ï¼Œä»…é èœå•æ˜¾ç¤º/éšè—æ§åˆ¶
- APIæ¥å£æƒé™éªŒè¯ä¸å¤Ÿç»†ç²’åº¦
- ç¼ºå°‘åŸºäºèµ„æºçš„æƒé™æ§åˆ¶
- æ²¡æœ‰æ“ä½œæ—¥å¿—è®°å½•

## ğŸ“ å…·ä½“é—®é¢˜

### 1. å‰ç«¯è·¯ç”±ç¼ºå°‘æƒé™å®ˆå«
**æ–‡ä»¶**: frontend/src/router/index.ts
```typescript
// âŒ ç¼ºå°‘ beforeEach å¯¼èˆªå®ˆå«è¿›è¡Œæƒé™éªŒè¯
const router = createRouter({
  // ...
})

// åº”è¯¥æ·»åŠ æƒé™éªŒè¯
router.beforeEach((to, from, next) => {
  // æ£€æŸ¥ç”¨æˆ·è§’è‰²å’Œæƒé™
  // éªŒè¯è·¯ç”±è®¿é—®æƒé™
})
```

### 2. APIæƒé™éªŒè¯ä¸å®Œå–„
**æ–‡ä»¶**: backend/api/decorators.py
```python
# âŒ åªæœ‰è§’è‰²éªŒè¯ï¼Œç¼ºå°‘èµ„æºçº§æƒé™
@require_role('admin')
def get_student_grades(student_id):
    # ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿæˆç»©
    # ä½†ç¼ºå°‘éªŒè¯ï¼šè¯¥æ•™å¸ˆæ˜¯å¦æ•™æˆè¿™ä¸ªå­¦ç”Ÿï¼Ÿ
    pass
```

### 3. æ•æ„Ÿæ“ä½œç¼ºå°‘äºŒæ¬¡éªŒè¯
- åˆ é™¤å­¦ç”Ÿè®°å½•æ²¡æœ‰ç¡®è®¤æœºåˆ¶
- ä¿®æ”¹æˆç»©æ²¡æœ‰æ“ä½œæ—¥å¿—
- æ‰¹é‡å¯¼å…¥æ•°æ®æ²¡æœ‰æƒé™é™åˆ¶

### 4. æƒé™é…ç½®ç¡¬ç¼–ç 
**æ–‡ä»¶**: backend/config.py
```python
# âŒ æƒé™é…ç½®ç¡¬ç¼–ç ï¼Œä¸æ˜“æ‰©å±•
ADMIN_ROLES = ['admin', 'super_admin']
TEACHER_ROLES = ['teacher', 'department_head']
```

## ğŸ·ï¸ æ ‡ç­¾
security, permission, rbac, priority-high, vulnerability

## ğŸš€ å»ºè®®è§£å†³æ–¹æ¡ˆ

### 1. å®ç°RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰
- åˆ›å»ºæƒé™è¡¨ï¼ˆPermissionsï¼‰
- åˆ›å»ºè§’è‰²æƒé™å…³è”è¡¨ï¼ˆRole_Permissionsï¼‰
- åˆ›å»ºç”¨æˆ·è§’è‰²å…³è”è¡¨ï¼ˆUser_Rolesï¼‰

### 2. æ·»åŠ å‰ç«¯è·¯ç”±å®ˆå«
```typescript
// å®ç°æƒé™éªŒè¯ä¸­é—´ä»¶
router.beforeEach(async (to, from, next) => {
  const requiredPermissions = to.meta.permissions
  const userPermissions = await getUserPermissions()
  
  if (hasPermission(userPermissions, requiredPermissions)) {
    next()
  } else {
    next('/403')
  }
})
```

### 3. åç«¯APIæƒé™è£…é¥°å™¨
```python
@require_permissions(['student:read', 'grade:read'])
@require_ownership('student_id')  # åªèƒ½æŸ¥çœ‹è‡ªå·±çš„å­¦ç”Ÿ
def get_student_grades(student_id):
    pass
```

### 4. æ·»åŠ å®¡è®¡æ—¥å¿—
- è®°å½•æ‰€æœ‰æ•æ„Ÿæ“ä½œ
- è®°å½•ç™»å½•/ç™»å‡ºäº‹ä»¶
- è®°å½•æƒé™å˜æ›´

## ğŸ“‹ å¾…åŠäº‹é¡¹

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€æƒé™æ§åˆ¶
- [ ] è®¾è®¡å¹¶å®ç°RBACæ•°æ®æ¨¡å‹
- [ ] æ·»åŠ å‰ç«¯è·¯ç”±æƒé™å®ˆå«
- [ ] å®ç°åç«¯æƒé™éªŒè¯è£…é¥°å™¨
- [ ] åˆ›å»ºæƒé™ç®¡ç†ç•Œé¢

### ç¬¬äºŒé˜¶æ®µï¼šç»†ç²’åº¦æƒé™
- [ ] å®ç°èµ„æºçº§æƒé™æ§åˆ¶
- [ ] æ·»åŠ æ•°æ®è¡Œçº§å®‰å…¨
- [ ] å®ç°åŠ¨æ€æƒé™åˆ†é…
- [ ] æ·»åŠ æƒé™ç»§æ‰¿æœºåˆ¶

### ç¬¬ä¸‰é˜¶æ®µï¼šå®‰å…¨å¢å¼º
- [ ] æ·»åŠ æ“ä½œå®¡è®¡æ—¥å¿—
- [ ] å®ç°ä¼šè¯ç®¡ç†
- [ ] æ·»åŠ IPç™½åå•åŠŸèƒ½
- [ ] å®ç°å¤šå› ç´ è®¤è¯

## ğŸ¯ éªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰APIæ¥å£éƒ½æœ‰æ­£ç¡®çš„æƒé™éªŒè¯
- [ ] å‰ç«¯è·¯ç”±å—åˆ°æƒé™ä¿æŠ¤
- [ ] æ•æ„Ÿæ“ä½œæœ‰å®¡è®¡è®°å½•
- [ ] æƒé™å¯é…ç½®ä¸”æ˜“äºç®¡ç†
- [ ] é€šè¿‡å®‰å…¨æµ‹è¯•ç”¨ä¾‹

## ğŸ“š é™„åŠ ä¿¡æ¯
- **CVSSè¯„åˆ†**: 7.5 (High)
- **å½±å“èŒƒå›´**: æ•´ä¸ªç³»ç»Ÿ
- **ä¼˜å…ˆçº§**: é«˜ï¼ˆå®‰å…¨ç›¸å…³ï¼‰
- **é¢„ä¼°å·¥ä½œé‡**: 1-2å‘¨
- **ç›¸å…³æ ‡å‡†**: OWASP Top 10 - A01:2021 â€“ Broken Access Control

## ğŸ”— ç›¸å…³èµ„æº
- [OWASP Access Control Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Access_Control_Cheat_Sheet.html)
- [RBACè®¾è®¡æœ€ä½³å®è·µ](https://csrc.nist.gov/publications/detail/sp/800-162/final)
- [Vue Routerå¯¼èˆªå®ˆå«æ–‡æ¡£](https://router.vuejs.org/guide/advanced/navigation-guards.html)

## ğŸ’¡ é¢å¤–å»ºè®®
1. ä½¿ç”¨CASLæˆ–ç±»ä¼¼çš„æƒé™ç®¡ç†åº“
2. å®ç°æƒé™ç¼“å­˜æœºåˆ¶æé«˜æ€§èƒ½
3. å®šæœŸè¿›è¡Œæƒé™å®¡è®¡
4. å»ºç«‹æƒé™ç”³è¯·å’Œå®¡æ‰¹æµç¨‹
